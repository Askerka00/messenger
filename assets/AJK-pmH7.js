import{a0 as r,o}from"./D1Ovq820.js";const i=r("chat",{state:()=>({users:["Alice","Bob","Charlie"],currentUser:null,currentChat:null,messages:{}}),actions:{setCurrentUser(s){this.currentUser=s,this.saveCurrentUser()},saveCurrentUser(){localStorage&&localStorage.setItem("currentUser",this.currentUser)},loadCurrentUser(){if(localStorage){const s=localStorage.getItem("currentUser");s&&(this.currentUser=s)}},sendMessage(s,e){const t=new Date().toLocaleTimeString();this.addMessageToUser(this.currentUser,s,e,t),this.addMessageToUser(s,this.currentUser,e,t),this.saveMessages()},addMessageToUser(s,e,t,a){this.messages[s]||(this.messages[s]={}),this.messages[s][e]||(this.messages[s][e]=[]),this.messages[s][e].push({sender:this.currentUser,message:t,timestamp:a})},getMessages(s){var e;return((e=this.messages[this.currentUser])==null?void 0:e[s])||[]},saveMessages(){localStorage&&localStorage.setItem("messages",JSON.stringify(this.messages))},loadMessages(){if(localStorage){const s=localStorage.getItem("messages");s&&(this.messages=JSON.parse(s))}}},subscribe:{handler(s){window.addEventListener("storage",e=>{e.key==="messages"&&s.loadMessages()})}}});function n(){const s=i();return o(()=>{s.loadCurrentUser(),s.loadMessages()}),s}export{i as a,n as u};
